(this["webpackJsonpnews-site"]=this["webpackJsonpnews-site"]||[]).push([[0],{37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},45:function(e,t,n){},46:function(e,t,n){},48:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},52:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),c=n.n(a),s=n(20),i=n.n(s),o=(n(37),n(38),n(39),n(5)),u=function(){var e=Object(o.c)((function(e){return e.root.users.currentUser}));return Object(r.jsx)("div",{className:"home",children:Object(r.jsxs)("h1",{className:"home__hello",children:["\u041f\u0440\u0438\u0432\u0435\u0442, ",e||"\u0433\u043e\u0441\u0442\u044c"]})})},p=n(9),l=n(4),d=n.n(l),j=n(7),b=[{id:1,author:"user",title:"\u0412\u0430\u0436\u043d\u0430\u044f \u043d\u043e\u0432\u043e\u0441\u0442\u044c",content:"Lorem ipsum dolor sit amet, consectetur adipisicing elit. Ad consequatur consequuntur corporis cupiditate\n  debitis dolorem eius in incidunt iusto laboriosam magni maxime nulla officiis recusandae sit ut velit veniam,\n  voluptate.",approved:!0,created:"2020-11-29T10:10:35"},{id:2,author:"user",title:"\u0415\u0449\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u044c",content:"Beatae corporis doloremque eius fuga incidunt inventore minus placeat reiciendis reprehenderit sapiente? Eaque\n  earum eveniet explicabo facilis fugit incidunt, ipsam, iure mollitia optio perspiciatis possimus quidem quisquam\n  repellendus, similique tempora.",approved:!1,created:"2020-11-29T10:10:36"},{id:3,author:"someUser",title:"\u041d\u0435\u0431\u043e\u043b\u044c\u0448\u0430\u044f \u043d\u043e\u0432\u043e\u0441\u0442\u044c",content:"Lorem ipsum dolor sit amet, consectetur adipisicing elit.",approved:!1,created:"2020-11-29T10:10:37"}];function O(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"GET_News_SUCCESS",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function _(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"GET_News_ERROR",payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function m(e,t,n){return function(){var r=Object(j.a)(d.a.mark((function r(a){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a({type:"CREATE_News_SUCCESS",payload:{title:e,content:t,currentUser:n}});case 1:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}function f(e){return function(){var t=Object(j.a)(d.a.mark((function t(n){return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:"DELETE_News",payload:e});try{n({type:"DELETE_News_SUCCESS",payload:e})}catch(r){n({type:"DELETE_News_ERROR",payload:r.User||"Failed to delete news!"})}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}n(45);var v=n(30),h=[{name:"user",password:"user"},{name:"admin",password:"admin"}];var w=function(e){var t=e.currentUser,n=e.isOpen,c=e.openPopupCreateNews,s=Object(o.b)(),i=(Object(o.c)((function(e){return e.root.news.getError})),Object(a.useState)("")),u=Object(p.a)(i,2),l=u[0],b=u[1],O=Object(a.useState)(""),_=Object(p.a)(O,2),f=_[0],v=_[1],h=Object(a.useState)(""),w=Object(p.a)(h,2),x=w[0],N=w[1],g=Object(a.useState)(!1),y=Object(p.a)(g,2),E=y[0],C=y[1],L=function(e){e.preventDefault(),""!==f&&""!==l?(C(!0),""===x&&s(function(e,t,n){return function(){var r=Object(j.a)(d.a.mark((function r(a){return d.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:a(function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"CREATE_News_START"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());try{a(m(e,t,n))}catch(c){a({type:"CREATE_News_ERROR",payload:c.User||"Failed to create News!"})}case 2:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}()}(l,f,t)),S()):(""===l&&N("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u0432\u0435\u0434\u0438\u0442\u0435 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a \u043d\u043e\u0432\u043e\u0441\u0442\u0438"),""===f&&N("\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043d\u0430\u043f\u0438\u0448\u0438\u0442\u0435 \u0441\u043e\u0434\u0435\u0440\u0436\u0438\u043c\u043e\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"))},S=function(){C(!0),setTimeout((function(){c()}),300)};return Object(r.jsx)(r.Fragment,{children:n&&Object(r.jsxs)("div",{className:"PopupCreateNews "+(E?"PopupCreateNews--transitionOut":"PopupCreateNews--transitionIn"),children:[Object(r.jsx)("button",{className:"PopupCreateNews__close",onClick:function(){return S()},children:"X"}),Object(r.jsx)("h3",{children:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438"}),x&&Object(r.jsx)("div",{className:"PopupCreateNews__error",children:x}),Object(r.jsxs)("form",{onSubmit:function(e){return L(e)},className:"PopupCreateNews__form",children:[Object(r.jsx)("input",{className:"PopupCreateNews__input input--title",type:"text",placeholder:"\u0417\u0430\u0433\u043e\u043b\u043e\u0432\u043e\u043a",onChange:function(e){return b(e.target.value)}}),Object(r.jsx)("textarea",{className:"PopupCreateNews__input input--content",placeholder:"\u0421\u043e\u0434\u0435\u0440\u0436\u0430\u043d\u0438\u0435",onChange:function(e){return v(e.target.value)}}),Object(r.jsx)("input",{className:"PopupCreateNews__input input--submit",type:"submit",value:"\u041e\u043f\u0443\u0431\u043b\u0438\u043a\u043e\u0432\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"})]})]})})},x=(n(46),n(19)),N=n.n(x),g=function(){var e=Object(o.b)(),t=Object(o.c)((function(e){return e.root.users.currentUser})),n=Object(o.c)((function(e){return e.root.news.news})),c=Object(o.c)((function(e){return e.root.app.colorsDark})),s=Object(a.useState)(""),i=Object(p.a)(s,2),u=i[0],l=i[1],m=Object(a.useState)(!1),v=Object(p.a)(m,2),h=v[0],x=v[1];Object(a.useEffect)((function(){e(function(){var e=Object(j.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"GET_News_START"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());try{t((n=b)?O(n):_("Error"))}catch(r){t({type:"GET_News_ERROR",payload:r.User||"Failed to get User! :C"})}case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]);var g=function(){x(!h)};return Object(r.jsxs)("div",{className:"news__container",children:[Object(r.jsxs)("div",{className:"news__header",children:[Object(r.jsx)("input",{type:"text",placeholder:"\u041f\u043e\u0438\u0441\u043a \u043f\u043e \u043d\u043e\u0432\u043e\u0441\u0442\u044f\u043c",onChange:function(e){return l(e.target.value)},className:"news__search "+(c&&"news__search--dark")}),t&&Object(r.jsx)("button",{className:"create-news",onClick:function(){return g()},children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"})]}),Object(r.jsx)("div",{className:"news__content",children:function(a){var c=n;return a&&(c=c.filter((function(e){return e.content.toLowerCase().includes(a.toLowerCase())}))),c.map((function(n,a){return Object(r.jsx)("div",{children:"admin"!==t?!1===n.approved?n.author===t?Object(r.jsxs)("div",{className:"news "+(!n.approved&&"news--unapproved"),children:[Object(r.jsx)("div",{className:"news__item news__title",children:n.title}),Object(r.jsx)("div",{className:"news__item news__text",children:n.content}),Object(r.jsx)("div",{className:"news__item news__date",children:N()(n.created).format("HH:mm:ss, YYYY-MM-DD")})]},a):"":Object(r.jsxs)("div",{className:"news "+(!n.approved&&"news--unapproved"),children:[Object(r.jsx)("div",{className:"news__item news__title",children:n.title}),Object(r.jsx)("div",{className:"news__item news__text",children:n.content}),Object(r.jsx)("div",{className:"news__item news__date",children:N()(n.created).format("HH:mm:ss, YYYY-MM-DD")})]},a):!1===n.approved?Object(r.jsxs)("div",{className:"news "+(!n.approved&&"news--unapproved"),children:[Object(r.jsx)("div",{className:"news__item news__title",children:n.title}),Object(r.jsx)("div",{className:"news__item news__text",children:n.content}),Object(r.jsxs)("div",{className:"news__admin",children:[Object(r.jsx)("button",{className:"news__button news__button--approve",onClick:function(){return e((t=n.id,function(){var e=Object(j.a)(d.a.mark((function e(n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:"News_APPROOVE",payload:t});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));var t},children:"\u041e\u0434\u043e\u0431\u0440\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"}),Object(r.jsx)("button",{className:"news__button news__button--delete",onClick:function(){return e(f(n.id))},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"}),Object(r.jsx)("div",{className:"news__item news__date",children:N()(n.created).format("HH:mm:ss, YYYY-MM-DD")})]})]},a):Object(r.jsxs)("div",{className:"news "+(!n.approved&&"news--unapproved"),children:[Object(r.jsx)("div",{className:"news__item news__title",children:n.title}),Object(r.jsx)("div",{className:"news__item news__text",children:n.content}),Object(r.jsxs)("div",{className:"news__admin",children:[Object(r.jsx)("button",{className:"news__button news__button--delete",onClick:function(){return e(f(n.id))},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043d\u043e\u0432\u043e\u0441\u0442\u044c"}),Object(r.jsx)("div",{className:"news__item news__date",children:N()(n.created).format("HH:mm:ss, YYYY-MM-DD")})]})]},a)},n+Math.random())}))}(u)}),h&&Object(r.jsx)(w,{isOpen:h,currentUser:t,openPopupCreateNews:function(){return g()}})]})},y=(n(48),n(6)),E=n(14),C=(n(49),function(e){var t=e.openPopupLogin,n=e.setNight,a=e.props,c=Object(o.b)(),s=Object(o.c)((function(e){return e.root.users.currentUser})),i=Object(o.c)((function(e){return e.root.app.colorsDark}));return console.log("props",a),Object(r.jsxs)("nav",{className:"navbar navbar--light",children:[Object(r.jsx)("div",{className:"navbar__brand",children:"Profilance"}),Object(r.jsxs)("ul",{className:"navbar__list",children:[Object(r.jsx)("li",{className:"navbar__nav-item",children:Object(r.jsx)(E.b,{exact:!0,to:"/",activeClassName:"active",className:"nav-item__link",children:"\u0413\u043b\u0430\u0432\u043d\u0430\u044f"})}),Object(r.jsx)("li",{className:"navbar__nav-item",children:Object(r.jsx)(E.b,{to:"/news",activeClassName:"active",className:"nav-item__link",children:"\u041d\u043e\u0432\u043e\u0441\u0442\u0438"})}),!s&&Object(r.jsx)("li",{className:"navbar__nav-item",children:Object(r.jsx)("button",{className:"nav-item__button",onClick:t,children:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"})}),s&&Object(r.jsxs)("div",{className:"navbar__user-form navbar__nav-item",children:[s,Object(r.jsx)("button",{className:"nav-item__button",onClick:function(){return c(function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"LOGOUT_user"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},children:"\u0412\u044b\u0439\u0442\u0438 \u0438\u0437 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430"})]}),Object(r.jsx)("li",{className:"",children:Object(r.jsx)("button",{className:"nav-item--palette "+(i?"palette--dark":"palette--light"),onClick:n,children:i?"\ud83c\udf23":"\ud83c\udf1c"})})]})]})}),L=(n(51),function(e){var t=e.isOpen,n=e.openPopupLogin,c=Object(o.b)(),s=Object(a.useState)(""),i=Object(p.a)(s,2),u=i[0],l=i[1],b=Object(a.useState)(""),O=Object(p.a)(b,2),_=O[0],m=O[1],f=Object(o.c)((function(e){return e.root.users.getError})),w=Object(a.useState)(!1),x=Object(p.a)(w,2),N=x[0],g=x[1];Object(a.useEffect)((function(){""===f&&!0===N&&(n(),g(!1))}),[f,N]);return Object(r.jsx)(r.Fragment,{children:t&&Object(r.jsxs)("div",{className:"popupLogin "+(t?"popupLogin--transitionIn":"popupLogin--transitionOut"),children:[Object(r.jsx)("button",{className:"popupLogin__close",onClick:n,children:"X"}),Object(r.jsxs)("div",{className:"popupLogin__content",children:[Object(r.jsx)("h3",{children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0432\u0430\u0448 \u043b\u043e\u0433\u0438\u043d \u0438 \u043f\u0430\u0440\u043e\u043b\u044c"}),f&&Object(r.jsx)("div",{className:"popupLogin__error",children:f}),Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),c(function(e,t){return function(){var n=Object(j.a)(d.a.mark((function n(r){var a,c,s,i,o,u;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r({type:"LOGIN_user"}),n.prev=1,a=h,c=!1,s="",i=Object(v.a)(a);try{for(i.s();!(o=i.n()).done;)(u=o.value).name===e?u.password===t?c=!0:s="\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043f\u0430\u0440\u043e\u043b\u044c":s="\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u0437\u0430\u0440\u0435\u0433\u0435\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d"}catch(p){i.e(p)}finally{i.f()}if(!c){n.next=12;break}return n.next=10,r({type:"LOGIN_user_SUCCESS",payload:e});case 10:n.next=14;break;case 12:return n.next=14,r({type:"LOGIN_user_ERROR",payload:s});case 14:n.next=19;break;case 16:n.prev=16,n.t0=n.catch(1),r({type:"CREATE_User_ERROR",payload:n.t0.User||"Failed to get User! :C"});case 19:case"end":return n.stop()}}),n,null,[[1,16]])})));return function(e){return n.apply(this,arguments)}}()}(u,_)),g(!0)},className:"popupLogin__form",children:[Object(r.jsx)("input",{className:"popupLogin__input input--text",type:"text",onChange:function(e){return l(e.target.value)}}),Object(r.jsx)("input",{className:"popupLogin__input input--password",type:"password",onChange:function(e){return m(e.target.value)}}),Object(r.jsx)("input",{className:"popupLogin__input input--submit",type:"submit",value:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f"})]})]})]})})});var S=function(e){var t=Object(o.b)(),n=(Object(y.f)(),Object(o.c)((function(e){return e.root.app.colorsDark}))),c=Object(a.useState)(!1),s=Object(p.a)(c,2),i=s[0],u=s[1],l=function(){u(!i)};return Object(r.jsxs)("div",{className:"layout "+(n?"layout--dark":"layout--light"),children:[Object(r.jsx)(L,{isOpen:i,openPopupLogin:function(){return l()}}),Object(r.jsx)(C,{openPopupLogin:function(){return l()},setNight:function(){return t(function(){var e=Object(j.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:"SWITCH_THEME"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),Object(r.jsx)("main",{className:"layout__main",children:e.children})]})};var R=function(){var e=Object(r.jsxs)(y.c,{children:[Object(r.jsx)(y.a,{path:"/",exact:!0,component:u}),Object(r.jsx)(y.a,{path:"/News",component:g}),Object(r.jsx)(y.a,{render:function(){return Object(r.jsx)("h1",{children:"404: page not found"})}})]});return Object(r.jsx)(S,{children:e})},k=n(31),T=n(10),U=n(3),D={currentUser:"",getLoading:!1,getError:""};var P=n(27),G={news:[],getLoading:!1,getError:""};var Y={colorsDark:!1};var A=Object(T.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOGIN_user":return Object(U.a)(Object(U.a)({},e),{},{getLoading:!0,getError:""});case"LOGIN_user_SUCCESS":return Object(U.a)(Object(U.a)({},e),{},{getLoading:!1,currentUser:t.payload});case"LOGIN_user_ERROR":return Object(U.a)(Object(U.a)({},e),{},{getLoading:!1,getError:t.payload});case"LOGOUT_user":return Object(U.a)(Object(U.a)({},e),{},{getLoading:!1,getError:"",currentUser:""});default:return e}},news:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_News_START":return console.log("GET_News_START"),Object(U.a)(Object(U.a)({},e),{},{getLoading:!0});case"GET_News_SUCCESS":return Object(U.a)(Object(U.a)({},e),{},{getLoading:!1,news:t.payload});case"GET_News_ERROR":return Object(U.a)(Object(U.a)({},e),{},{getLoading:!1,getError:t.payload});case"News_APPROOVE":var n=e.news.map((function(e){return e.id===t.payload?Object(U.a)(Object(U.a)({},e),{},{approved:!0}):e}));return Object(U.a)(Object(U.a)({},e),{},{getLoading:!1,news:n});case"DELETE_News":var r=e.news.filter((function(e){return e.id!==t.payload}));return Object(U.a)(Object(U.a)({},e),{},{getLoading:!1,news:r});case"CREATE_News_START":return Object(U.a)(Object(U.a)({},e),{},{getLoading:!0});case"CREATE_News_SUCCESS":console.log("action.payload.content",t.payload.content);var a=new Date,c={id:e.news.length+1,author:t.payload.currentUser,title:t.payload.title,content:t.payload.content,approved:!1,created:a.toString()};return console.log([].concat(Object(P.a)(e.news),[c])),Object(U.a)(Object(U.a)({},e),{},{getLoading:!1,news:[].concat(Object(P.a)(e.news),[c])});case"CREATE_News_ERROR":return Object(U.a)(Object(U.a)({},e),{},{getLoading:!1,getError:t.payload});default:return e}},app:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SWITCH_THEME":return{colorsDark:!e.colorsDark};default:return e}}}),H=Object(k.a)({reducer:{root:A}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(o.a,{store:H,children:Object(r.jsx)(E.a,{basename:"/News-site/",children:Object(r.jsx)(R,{})})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[52,1,2]]]);
//# sourceMappingURL=main.cd6702c5.chunk.js.map